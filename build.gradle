// ValidatingJsonInstaceUsingJsontronInKatalonStudio/build.gradle
// $ gradle drivers

version = '0.1.0'

ext {
    AUTO_IMPORTED_JAR_PREFIX = 'AUTOIMPORTED_'
}

repositories {
    mavenCentral()
    mavenLocal()
}

configurations {
    myconf
}

dependencies {
    //myconf group: 'com.kazurayam', name: 'chromedriverfactory', version: "0.7.0"
    myconf group: 'com.kazurayam', name: 'subprocessj', version: '0.3.3'
    myconf group: 'com.beust', name: 'jcommander', version: '1.82'
}

task drivers {
    doFirst {
        delete fileTree("Drivers") {
            include("**/" + AUTO_IMPORTED_JAR_PREFIX + "*")
        }
    }
    doLast {
        copy { copySpec ->
            copySpec
                .from(project.getConfigurations().getByName("myconf"))
                .into("Drivers")
                .include(
                    "**/subprocessj*.jar",
                    "**/jcommander*.jar"
                    )
                .rename({ s ->
                    AUTO_IMPORTED_JAR_PREFIX + s
                    })
        }
    }
}
